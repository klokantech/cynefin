<!DOCTYPE html>
<!--[if lt IE 8 ]><html lang="cs" class="ie7 no-js"> <![endif]-->
<!--[if lt IE 9 ]><html lang="cs" class="ie8 no-js"> <![endif]-->
<!--[if lt IE 10 ]><html lang="cs" class="ie9 no-js"> <![endif]-->
<!--[if (gt IE 10)|!(IE)]><!-->
<html lang="cs" class="responsive no-js"> 
<!--<![endif]-->
	<head>
		
		<meta charset="utf-8">
		<!--[if IE]>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<![endif]-->
		<meta name="author" content="">
		<meta name="keywords" content="">
		<meta name="description" content="">
        <meta name="viewport" content="width=device-width">

		<title>Cynefin</title>				
		
		<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen">
				
		<script src="/js/app.js"></script>				
		
		<!--[if (lt IE 9) & (!IEMobile)]>
		<link rel="stylesheet" href="/css/main-ie.css" media="screen">
		<script src="/js/html5shiv.min"></script>	
		<![endif]-->
		
	</head>		
	<body class="clean-background with-panel">
		
		<div class="page">
			
			<header>
				<div class="inner">

					<a href="./" class="logo">
						Cynefin
					</a>

					<hr>

					<nav>
						<ul class="navigation navigation-header">
							<li>
								<a href="/" title="Home">Home</a>
							</li>
							<li class="active">
								<a href="/tithe-maps" title="Tithe maps">Tithe maps</a>
							</li>
							<li>
								<a href="/find-records" title="Find Records">Find Records</a>
							</li>	
							<li>
								<a href="/news" title="News">News</a>
							</li>
							<li>
								<a href="/blog" title="Blog">Blog</a>
							</li>
							<li>
								<a href="/contact" title="Contact">Contact</a>
							</li>									
						</ul>
						<!-- .navigation -->
					</nav>	
					
					<hr>

					<div class="languages">
						<a href="#" title="Welsh">Welsh</a>
						<span class="sep">|</span>
						<a href="#" title="English" class="active">English</a>
					</div>
					<!-- .languages -->	
				
				</div>
				<!-- .inner -->
				
				<div class="panel">		
					<nav>
						<ul class="navigation navigation-panel">
							<li>
								<a href="/tithe-maps/transcribe" title="Transcribe">Transcribe</a>
							</li>
							<li class="active">
								<a href="/tithe-maps/georeference" title="Georeference">Georeference</a>
							</li>
							<li>
								<a href="/tithe-maps/visualize" title="Visualize">Visualize</a>
							</li>	
							<li>
								<a href="/tithe-maps/accuracy" title="Accuracy">Accuracy</a>
							</li>
							<li>
								<a href="/tithe-maps/this-map" title="This map">This map</a>
							</li>									
						</ul>
						<!-- .navigation -->
					</nav>	
					<p>Pool P., Lower Division (Llannerchudol, Trefnant Fechan, Town & Gungrog Fawr T.</p>
				</div>
				<!-- .panel -->
			</header>

			<hr>	
			
			<section class="application">
				<script src="/js/georeference.js"></script>
				<link rel="stylesheet" href="/css/georeference.css" type="text/css" media="screen">

				<div class="application-georeference form form-small">

					<form id="geocoderForm" class="form">
						<fieldset>		
							<span class="control-appended control-appended-nospace">
								<input type="text" id="geocoder" placeholder="Find a place..." class="control-input control-appended-input">
								<span class="control-appended-btn">
									<button type="submit" class="btn">Find place</button>
								</span>	
							</span>
						</fieldset>
					</form>

					<div id="scan"></div>

					<a href="#" id="scan-plus"><span class="icon-plus"></span></a>
					<a href="#" id="scan-minus"><span class="icon-minus"></span></a>

					<div id="geo"></div>
					
					<a href="#" id="geo-plus"><span class="icon-plus"></span></a>
					<a href="#" id="geo-minus"><span class="icon-minus"></span></a>
					
					<div id="scanRotationControl">
						â†»
						<div class="rotate">+90&deg;</div>
						<div class="auto">Auto</div>
						<div class="manual">Free</div>
						<div class="ctrlManualHelp">Use Alt+Shift+drag to rotate manually</div>
					</div>

					<div id="coordinputs" class="hidden">
						<input type="text" id="coordinput-lat">
						<input type="text" id="coordinput-lng">
						Easting: <input type="text" id="coordinput-eas">
						Northing: <input type="text" id="coordinput-nor">
						<!--<input type="text" id="coordinput-scx" />-->
						<!--<input type="text" id="coordinput-scy" />-->
						<div id="srs-wrap">
							<a href="#" id="coordinput-srs">SRS: <span id="coordinput-currentsrs">not set</span></a>
							<div id="srsdialog">
								<input type="text" id="srsdialog-q" placeholder="Country, code or name of the system ...">
							</div>
						</div>
						<a href="#" id="coordinput-del">Remove</a>
					</div>

					<div id="infobox">
						<div class="cutlineOverlap">The cutlines are not allowed to overlap.</div>
						<div class="pointCount">Please, place a few more points.</div>
						<div class="collinearity coverage">If possible, place the points uniformly in all parts of the old map.</div>
					</div>
					
					<div style="visibility:hidden;width:0;height:0;overflow:hidden;position:absolute;">
						<!-- It seems that OL3 need to be initialized inside a div that is part of the DOM, otherwise errors occur -->
						<div id="geoLoupe"></div>
						<div id="scanLoupe"></div>
						<div id="loupeCross">
							<div id="loupeCrossVert"></div>
							<div id="loupeCrossHoriz"></div>
						</div>
					</div>

					<div id="adjustModeBtn" class="disabled">
						<div class="startAdjust btn">Start adjust mode</div>
						<div class="closeAdjust btn">Close adjust mode</div>
					</div>
					
					<div id="allowTPSWrap">
						<input id="allowTPS" type="checkbox"><label for="allowTPS">Allow TPS</label>
					</div>
					
					<div id="hsvSliders">
						<label class="custom-block"><input type="checkbox" id="hsvOn">Use HSV filter</label>
						<input id="minH" type="range" min="0" max="1" step="0.05" value="0">H<input id="maxH" type="range" min="0" max="1" step="0.05" value="1"><br>
						<input id="minS" type="range" min="0" max="1" step="0.05" value="0">S<input id="maxS" type="range" min="0" max="1" step="0.05" value="1"><br>
						<input id="minV" type="range" min="0" max="1" step="0.05" value="0">V<input id="maxV" type="range" min="0" max="1" step="0.05" value="0.6">
					</div>

					<script type="text/javascript">
				    	//toLonLat(x, y) -> [lon, lat]
				      	var toLonLat = function(x, y) { return [x, y]; };
				      	//fromLonLat(lon, lat) -> [x, y]
				      	var fromLonLat = function(lon, lat) { return [lon, lat]; };
				      	var json = {
				      		pyramid: { format: "ZXY", url: "./rastertiles/", width: 1823, height: 1527, tile_extension: "jpg" },
				      		cutline: [],
				      		control_points: []
				      	};
				      
				      	var georeference = new Georeference();
				      	var georeference_init = function(opt_json) { georeference.init(opt_json); };
				      	var georeference_finalize = function() { return georeference.finalize(); };

				      	//georeference.setCustomTransform(toLonLat, fromLonLat);
				      	//georeference.init(json);
				      	georeference.init('http://cynefin.georeferencer.com/map/I32wkzU4rVoaGd5fUew5pF/201405190936-tni9fR.json');
				    </script>


				</div>
				<!-- .application-georeference -->

					
			</section>

		</div>
		<!-- .page -->

	</body>
</html>